name: Manual Build
on:
  workflow_dispatch:
    inputs:
      expo-cli-username:
         description: 'The Expo CLI username'
         required: true
         default: ''
      expo-cli-password:
         description: 'The Expo CLI password'
         required: true
         default: ''
      platform:
        description: 'android or ios'
        required: true
        default: ''
jobs:
  build:
    name: Build
    runs-on: macos-latest
    strategy:
      fail-fast: false
      matrix:
        node-version: [ 14.x ]
    steps:
      - uses: actions/checkout@v2
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ inputs.node-version }}
      - uses: expo/expo-github-action@v5
        with:
          expo-version: ${{ github.event.inputs.expo-version }} 
          expo-username: ${{ github.event.inputs.expo-cli-username }} 
          expo-password: ${{ github.event.inputs.expo-cli-password }} 
      - run: yarn install
      - name: Build (Android)
        if: ${{ github.event.inputs.platform }}  == "android"
        run: expo build:${{ github.event.inputs.platform }}  --type app-bundle
      - name: Build (IOS)
        if: ${{ github.event.inputs.platform }}  == "ios"
        run: expo build:${{ github.event.inputs.platform }} 


